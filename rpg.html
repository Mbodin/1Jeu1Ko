<!DOCTYPE html><html><head><style>html{background:#334}body{margin:0 auto;max-width:42em;color:#ddd}a{color:#fff;cursor:pointer}</style><title>RPG</title></head><body><h1>RPG</h1><p>Game size is 1218 bytes</p><pre id="g"></pre><script>g=document.getElementById("g");C=".\n";p=s=>g.innerHTML+=s;p("You enter the forest"+C);r=i=>Math.ceil(i*Math.random());m=h=q=10;u=0;d=_=>r(2)<2?"Sh":"H";l=_=>{p("Gold: "+(m=m<0?0:m)+", health: "+h+C);c=_=>h<1?p("You die."):!u&r(7-q/9)<2?p("You reach the castle"+C+"Gold: "+m):l();t=c=>p("You meet a "+c+C);o=(m,f)=>p("<a onclick='"+f+"()'>"+m+"</a> ");A=N=U=_=>0;a=(v,s,c)=>o("Attack","A",A=_=>c(z=r(s)<3,p("You "+(z?"succeed":"fail")+" the attack and "+(z?"loot th":"get injured and loos")+"e gold"+C),z?m+=r(v):(m=r(m)-1,h-=r(s))));n=c=>o("Pass by","N",N=c);e=r(q);(e<4?_=>a(5,3,c,t("troll"),p("It attacks"+C)):e<7?_=>{t("smuggler");y=u?2*u:r(9);p(d()+(m<y&!u?"e ignores you":("e offers to "+(u?"buy your":"sell")+" contraband for "+y+" gold"))+C);a(y,3,c);m<y&!u?0:o("Smuggle","U",U=_=>c(m+=u?y:-y,u=u?0:y));n(c)}:e<9?_=>n(c,t("lord"),a(30,4,_=>c(q++))):_=>(t("knight"),u?p(d()+"e notices the contraband and attacks"+C):0,a(9,9,c),u)?0:n(c))();p("\n")};l()</script></body></html>
