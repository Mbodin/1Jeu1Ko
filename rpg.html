<!DOCTYPE html><html><head><style>html{background:#334}body{margin:0 auto;max-width:42em;color:#ddd}a{color:#fff;cursor:pointer}</style><title>RPG</title></head><body><h1>RPG</h1><p>Game size is 1121 bytes</p><pre id="g"></pre><script>g=document.getElementById`g`;p=s=>g.innerHTML+=s;C=s=>p(s+`.
`);D=s=>C("You "+s);D`enter the forest`;r=i=>1+0|i*Math.random();q=m=h=10;u=0;d=s=>C((r(2)<2?"Sh":"H")+s);l=_=>{C(`Gold: ${m=m<0?0:m}, health: `+h);c=_=>{A=P=S=_=>0;h<1?D`die`:!u&r(9)<2?C("Gold: "+m,D`reach the castle`):l()};t=c=>D("meet a "+c);o=m=>p(`<a onclick="${m[0]}()">${m}</a> `);a=(v,s,c)=>o("Attack",A=_=>c(z=r(s)<3,D(`${z?"succeed":"fail"} the attack and ${z?"loot the":"get injured, losing"} gold`),z?m+=r(v):m=r(m,h-=r(s))-1));n=c=>o("Pass by",P=c);e=r(q);e<4?a(5,3,c,t`troll`,C`It attacks`):e<7?n(c,a(y=u?2*u:r(9),3,c,d(m<y&!u?"e ignores you":`e offers to ${u?"buy your":"sell"}${F=" contraband "}for ${y} gold`,t`smuggler`)),m<y&!u?0:o("Smuggle",S=_=>c(m+=u?y:-y,u=u?0:y))):e<9?n(c,t`lord`,a(30,4,_=>c(q++))):(t`knight`,u?d(`e notices the${F}and attacks`):0,a(9,9,c),u)?0:n(c);p`
`};l()</script></body></html>
