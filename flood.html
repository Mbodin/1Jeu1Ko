<!DOCTYPE html><html><head><style>#b{background:#334;margin:0 auto;max-width:42em;padding:1em;color:#eee;white-space:nowrap}div{display:inline-block;width:6vw;height:6vw;padding:0}</style><title>Flood</title></head><body id="b"><h1>Flood</h1><p>Game size is ??? bytes</p><p>Moves: <span id="s">0</span></p><script>d=document;s=d[x="getElementById"]`s`;b=d[x]`b`;r=i=>i*Math.random()|0;
t=[[]];
for(x=y=0;x<9|y<9;x++){
	if(x>9)x=0,y++,t[y]=[],b[B](d[E]`br`);
	v=1+r(6);
	a=i=>v&i?'c':'6';
	b[B="appendChild"](t[y][x]=d[E="createElement"]`div`)[l="style"][c="background"]="#"+a(1)+a(2)+a(4);
}
b[B](t[9][9]=d[E]`div`)[l][c]="#ccc";
p=(x,y)=>{t[y][x][l][u="cursor"]="pointer";t[y][x][o="onclick"]=_=>{
	s.innerHTML++;
	A=[...Array(10)].map(_=>[]);
	k=t[9][9][l][c];
	h=t[y][x][l][c];
	f=(z,w)=>{
		if(!A[z][w]){
			A[z][w]=1;
			n=t[w][z];
			n[l][u]="default";
			n[o]=_=>0;
			K=(x,y)=>{
				x+=z;y+=w;
				x<0|y<0|x>9|y>9?0:f(x,y)
			}
			(v=n[l][c])==k||v==h?(n[l][c]=h,K(0,1),K(1,0),K(0,-1),K(-1,0)):p(z,w)
		}
	}
	f(9,9)
}}
p(8,9);p(9,8)
</script></body></html>
